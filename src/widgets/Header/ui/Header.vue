<template>
  <div class="row items-center header">
    <div class="col-1">
      <router-link to="/" style="text-decoration: none; color: inherit;">
        <p style="margin: 0; font-size: 2em">Sellzy</p>
      </router-link>
    </div>

    <div class="col-2" style="display: flex; justify-content: space-around">
      <q-btn 
        icon="menu" 
        label="–ö–∞—Ç–∞–ª–æ–≥" 
        :to="{ name: 'catalog' }" 
      />
    </div>

    <!-- üîΩ –ü–û–ò–°–ö -->
    <div class="col-6">
      <ProductSearchInput />
    </div>

    <div class="col-3" style="display:flex; justify-content: center; align-items: center; gap: 16px;">
      <!-- –ö–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã —Å –±–µ–π–¥–∂–∏–∫–æ–º -->
      <q-btn round flat icon="shopping_basket" :to="{ name: 'cart' }">
        <q-badge v-if="itemCount > 0" color="red" floating rounded>
          {{ itemCount }}
        </q-badge>
        <q-tooltip>–ö–æ—Ä–∑–∏–Ω–∞</q-tooltip>
      </q-btn>
      
      <!-- –ö–Ω–æ–ø–∫–∞ –õ–ö -->
      <q-btn round flat icon="account_circle" :to="{ name: 'orders' }">
        <q-tooltip>–ú–æ–∏ –∑–∞–∫–∞–∑—ã</q-tooltip>
      </q-btn>
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed, onMounted } from 'vue';
import ProductSearchInput from 'src/features/productSearch/ui/productSearchInput.vue';
import { useCartStore } from 'src/shared/store/cartStore';

const cartStore = useCartStore();

// –ü–æ–ª—É—á–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ store
const itemCount = computed(() => cartStore.itemCount.value);

// –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ—Ä–∑–∏–Ω–µ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ Header
onMounted(() => {
  cartStore.fetchCartInfo();
});
</script>

<style scoped>
.header {
  padding: 10px 0;
  background-color: white;
}
</style>